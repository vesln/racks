!function(e,t,n){typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&typeof define.amd=="object"?define(function(){return n()}):t[e]=n()}("Racks",this,function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');return r.exports||(r.exports={},r.call(r.exports,r,r.exports,e.relative(n))),r.exports}return e.modules={},e.resolve=function(t){var n=t,r=t+".js",i=t+"/index.js";return e.modules[r]&&r||e.modules[i]&&i||n},e.register=function(t,n){e.modules[t]=n},e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),i=n.split("/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return e(r.join("/"))}},e.alias=function(t,n){var r=e.modules[t];e.modules[n]=r},e.register("racks.js",function(e,t,n){function r(){this.stack=[],this.between=[]}function i(e){return Array.prototype.slice.call(e)}function s(e,t){return e.forEach(function(e){Array.isArray(e)?s(e,t):t.push(e)}),t}r.prototype.push=r.prototype.use=function(e){return this.stack.push(e),this},r.prototype.after=function(e){return this.between.push(e),this},r.prototype.send=function(){function t(){var n=e.shift(),r=i(arguments);r.push(t),n&&n.apply(this,r)}var e=this.batch();t.apply(this,i(arguments))},r.prototype.batch=function(){var e=this.stack,t=this.between;return!e.length||!t.length?e:s(e.map(function(e){return[e].concat(t)}),[])},e.exports=r}),e.alias("./racks.js","racks"),e("racks")})